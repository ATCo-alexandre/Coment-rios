<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./imagens/1_favicon.png" type="image/x-icon">
    <title>Azul 91 - Comentários</title>
    <!-- ìcones Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Roboto", sans-serif;
        }

        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: linear-gradient(rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.65)), url('./imagens/8_nomeTurma.png') no-repeat center center fixed;
            background-size: cover;
            color: #0000CD;
        }
        
        /* Header */
        .topo {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            backdrop-filter: blur(5px);
            color: #FFFFFF;
            flex-wrap: wrap;
        }

        .logo {
            height: 60px;
        }

        .menu-nav {
            display: flex;
            gap: 2rem;
        }

        .menu-nav a {
            text-align: center;
            color: white;
            text-decoration: none;
        }

        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #FFFFFF;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .menu-item i {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
            color: #1E90FF;
            animation: neon-blink 2s infinite;
        }

        .menu-item:hover {
            color: #00f7ff;
            animation: pulse 1s infinite alternate;
        }

        .menu-bars {
            font-size: 1.8rem;
            cursor: pointer;
            margin-left: 1rem;
            transition: color 0.3s;
        }

        .menu-bars:hover {
            color: #00f7ff;
            text-shadow: 0 0 8px #00f7ff, 0 0 16px #00f7ff;
            animation: pulse 1s infinite alternate;
        }

        .btn-comente {
            background-color: #0000FF;
            color: #FFFFFF;
            border: none;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: none;
        }

        .btn-comente:hover {
            color: #00f7ff;
            background-color: #000080;
            box-shadow: 0 0 10px #00f7ff, 0 0 20px #00f7ff;
            animation: pulse 1s infinite alternate;
        }

        @keyframes pulse {
            from {
                text-shadow: 0 0 5px #00f7ff;
                box-shadow: 0 0 5px #00f7ff;
            }
            to {
                text-shadow: 0 0 15px #00f7ff;
                box-shadow: 0 0 20px #00f7ff;
            }
        }

        @keyframes neon-blink {
            0%, 100% {
                text-shadow: 0 0 5px #1E90FF, 0 0 10px #1E90FF;
            }
            50% {
                text-shadow: 0 0 2px #1E90FF, 0 0 4px #1E90FF;
            }
        }

        /* Header - Menu Dropdown */
        .menu-dropdown-container {
            position: relative;
        }

        .menu-bars {
            font-size: 1.8rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .dropdown-menu {
            display: none;
            flex-direction: column;
            position: absolute;
            top: 100%;
            right: 0;
            background-color: #191970;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            box-shadow: 0 0 10px #00000088;
            z-index: 10;
        }

        .dropdown-item {
            color: #FFFFFF;
            text-decoration: none;
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .dropdown-item i {
            color: #1E90FF;
            font-size: 1.2rem;
        }

        /* Botão Comente */
        /* Overlay do popup */
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        /* Conteúdo do popup */
        .popup-content {
            position: relative;
            background-color: #0000FF;
            color: #FFFFFF;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            text-align: left;
        }

        .popup-content h2 {
            margin-top: 0;
            margin-bottom: 1rem;
            text-align: center;
        }

        .popup-close {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            font-size: 1.5rem;
            color: #FFFFFF;
            cursor: pointer;
            z-index: 1000;
        }

        .popup-content label {
            display: block;
            margin-top: 1rem;
            font-weight: bold;
        }

        .popup-content input,
        .popup-content select,
        .popup-content textarea {
            width: 100%;
            padding: 0.5rem;
            margin-top: 0.3rem;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
        }

        /* Estilo do campo Milhão com prefixo */
        .milhao-wrapper {
            display: flex;
            align-items: center;
        }

        .milhao-wrapper input {
            width: 60px;
        }

        .prefixo {
            margin-right: 0.5rem;
            font-weight: bold;
        }

        /* Botões Enviar e Cancelar */
        .form-buttons {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .form-buttons button {
            background-color: #FFFFFF;
            color: #0000FF;
            font-weight: bold;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
        }

        /* Popup Erro de Milhão */
        .popup-window {
    position: fixed;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -30%);
    width: 320px;
    background-color: #f0f0f0;
    border: 2px solid #000;
    box-shadow: 5px 5px 15px rgba(0,0,0,0.3);
    z-index: 1001;
    animation: fadeIn 0.3s ease-out;
}

/* Centralizando o conteúdo no popup */
#milhao-erro-popup .popup-content {
    align-items: center;
    text-align: center;
    padding: 30px 30px 20px 30px;
}

.popup-header {
    background-color: #1E90FF;
    color: #FFFFFF;
    padding: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.popup-title {
    font-weight: bold;
    color: #FFFFFF;
}

.popup-body {
    padding: 20px;
    text-align: center;
    font-weight: 700;
}

.popup-footer {
    padding: 10px;
    text-align: center;
    background-color: #e0e0e0;
}

.popup-footer button {
    padding: 5px 15px;
    border: 1px solid #1E90FF;
    color: #1E90FF;
    background: transparent;
    cursor: pointer;
    transition: 0.3s;
}

/* Hover do botão "Ok" */
.popup-footer button:hover {
    background-color: #1E90FF;
    color: #FFFFFF;
}

/* Animação de entrada */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translate(-50%, -40%);
    }

    to {
        opacity: 1;
        transform: translate(-50%, -30%);
    }
}

#btnErroOk {
    margin-top: 0;
    padding: 8px 20px;
    color: #1E90FF;
    border: 2px solid #1E90FF;
    border-radius: 5px;
    background: transparent;
    cursor: pointer;
    transition: 0.3s;
    margin-right: 0;
}

#btnErroOk:hover {
    background-color: #1E90FF;
    color: #FFFFFF;
}

/* Cabeçalho da Página */
.comentarios-heading {
  text-align: center;
  margin-top: 10px; /* Aproxima o heading do header */
}

.comentarios-heading h1 {
  color: #FFFFFF;
  font-weight: 600;
  font-size: 3.5rem;
  margin: 0;
}

.comentarios-heading p {
  color: #FFFFFF;
  font-weight: 500;
  font-size: 1.5rem;
  margin-top: 5px;
}

/* Tarjeta */
.tarjeta {
  display: flex;
  width: 320px;
  height: 57px;
  background-color: #000080; /* azul-aeronáutica */
  color: #FFFFFF;
  font-size: 18px;
  font-weight: bold;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);
}

.tarjeta-esquerda {
  width: 33.33%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

.milhao {
  color: #FFFFFF;
  font-size: 22px;
}

.tarjeta-label,
.tarjeta-milhao {
  line-height: 1.2;
}

.tarjeta-direita {
  width: 66.67%;
  display: flex;
  justify-content: center;
  align-items: center;
  padding-left: 8px;
  padding-right: 8px;
}

.tarjeta-nome {
  text-align: center;
}

/* Geleria de Comentários */
#comentarios-galeria {
  margin-top: 40px;
  padding: 20px;
}

.comentario-miniatura-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}

.comentario-miniatura {
  background-color: #000080;
  color: #fff;
  padding: 10px;
  border-radius: 5px;
  width: 250px;
  cursor: pointer;
  font-size: 14px;
}

.popup-comentario {
  position: fixed;
  top: 15%;
  left: 50%;
  transform: translateX(-50%);
  width: 80%;
  height: 70%;
  background-color: #f9f9f9;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  z-index: 1002;
  padding: 20px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.popup-header-expandido {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  color: #333;
}

#fechar-expandido, #fechar-adicionar {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  background-color: #4682B4;
  border: none;
  cursor: pointer;
}

.popup-body-expandido {
  padding: 20px 0;
  overflow-y: auto;
}

#tarjeta-expandida {
  margin-bottom: 20px;
}

.popup-navegacao {
  display: flex;
  justify-content: space-between;
}

.popup-navegacao button {
  background: none;
  border: none;
  font-size: 2rem;
  color: #4682B4;
  cursor: pointer;
}

#contador-comentarios {
  text-align: right;
  font-size: 1.2rem;
  padding-top: 10px;
  color: #333;
}

    </style>
</head>
<body>
    <header class="topo">
        <img src="./imagens/2_logo.gif" alt="Logo da Turma" class="logo">
      
        <nav class="menu-nav">
          <a href="index.html" class="menu-item">
            <i class="fa-solid fa-home"></i>
            <span>Home</span>
          </a>
          <a href="sobre.html" class="menu-item">
            <i class="fa-solid fa-users"></i>
            <span>Sobre</span>
          </a>
          <a href="fotos.html" class="menu-item">
            <i class="fa-solid fa-camera"></i>
            <span>Fotos</span>
          </a>
          <a href="homenagens.html" class="menu-item">
            <i class="fa-solid fa-dove"></i>
            <span>Homenagens</span>
          </a>
        </nav>           

        <!-- Menu Dropdown -->
        <div class="menu-dropdown-container">
            <i class="fa-solid fa-bars menu-bars" id="menu-toggle"></i>      
            <div class="dropdown-menu" id="dropdown-menu">
              <a href="#" class="dropdown-item"><i class="fa-solid fa-home"></i> Home</a>
              <a href="#" class="dropdown-item"><i class="fa-solid fa-users"></i> Sobre</a>
              <a href="#" class="dropdown-item"><i class="fa-solid fa-camera"></i> Fotos</a>
              <a href="#" class="dropdown-item"><i class="fa-solid fa-dove"></i> Homenagens</a>
            </div>
        </div>

        <!-- Botão de Comentário -->
        <button class="btn-comente" id="open-comment">Comente</button>
      </header>

       <!-- Popup de Comentário -->
  <div class="popup-overlay" id="comment-popup">
    <div class="popup-content">
      <h2>Adicionar Comentário</h2>
      <span class="popup-close"><i class="fa-solid fa-xmark"></i></span>
      <form id="form-comentario">
        <!-- Milhão -->
        <label for="milhao">Milhão:</label>
        <div class="milhao-wrapper">
          <span class="prefixo">91-</span>
          <input type="text" id="milhao" name="milhao" maxlength="4" pattern="[0-9]{4}" required>
        </div>

        <!-- Nome de Guerra -->
        <label for="nome">Nome de Guerra:</label>
        <input type="text" id="nome" name="nome" maxlength="30" required>

        <!-- Esquadrilha -->
        <label for="esquadrilha">Esquadrilha:</label>
        <select id="esquadrilha" name="esquadrilha" required>
          <option value="">Selecione</option>
          <option value="7ª Esquadrilha">7ª Esquadrilha</option>
          <option value="8ª Esquadrilha">8ª Esquadrilha</option>
          <option value="9ª Esquadrilha">9ª Esquadrilha</option>
          <option value="10ª Esquadrilha">10ª Esquadrilha</option>
          <option value="11ª Esquadrilha">11ª Esquadrilha</option>
          <option value="12ª Esquadrilha">12ª Esquadrilha</option>
        </select>

        <!-- Comentário -->
        <label for="comentario">Comentário:</label>
        <textarea id="comentario" name="comentario" rows="6" maxlength="1000" required></textarea>

        <!-- Botões -->
        <div class="form-buttons">
          <button type="submit">Enviar</button>
          <button type="button" id="cancelar">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Popup de Erro de Milhão -->
  <div id="milhao-erro-popup" class="popup-window" style="display: none;">
    <div class="popup-header">
      <span class="popup-title">Erro</span>
    </div>
    <div class="popup-body">
      <p>Milhão Incorreto!</p>
    </div>
    <div class="popup-footer">
        <button id="btnErroOk" onclick="fecharPopupErro()">Ok</button>
    </div>
  </div>

  <!-- Cabeçalho da Página-->
  <section class="comentarios-heading">
    <h1>Galeria de Comentários</h1>
    <p>Leia e compartilhe memórias marcantes.</p>
  </section>

  <!-- Tarjeta -->
  <div class="tarjeta">
    <div class="tarjeta-esquerda">
      <div class="tarjeta-label">ALUNO</div>
      <div class="tarjeta-milhao">91-1234</div>
    </div>
    <div class="tarjeta-direita">
      <div class="tarjeta-nome">KATZEINNSTEINN</div>
    </div>
  </div>

  <!-- Galeria de Comentários -->
<section id="comentarios-galeria">
    <div class="comentario-miniatura-container" id="comentarios-container">
      <!-- Miniaturas geradas por JS -->
    </div>
  
    <!-- Popup Comentário Expandido -->
    <div id="popup-comentario-expandido" class="popup-comentario" style="display: none;">
      <div class="popup-header-expandido">
        <span id="data-hora-comentario"></span>
        <button id="fechar-expandido"> </button>
      </div>
      <div class="popup-body-expandido">
        <div id="tarjeta-expandida" class="tarjeta"></div>
        <p id="comentario-completo"></p>
      </div>
      <div class="popup-navegacao">
        <button id="comentario-anterior">&#x276E;</button>
        <button id="comentario-proximo">&#x276F;</button>
      </div>
      <div id="contador-comentarios"></div>
    </div>
  
    <!-- Popup Adicionar Comentário -->
    <div id="popup-adicionar-comentario" class="popup-comentario" style="display: none;">
      <div class="popup-header-expandido">
        <h3>Adicionar Comentário</h3>
        <button id="fechar-adicionar"> </button>
      </div>
      <div class="popup-body-expandido">
        <label>Milhão: <input type="text" id="milhao-input" maxlength="4"></label><br>
        <label>Nome de Guerra: <input type="text" id="nome-guerra-input"></label><br>
        <label>Comentário:<br><textarea id="comentario-texto-input" rows="5" style="width:100%;"></textarea></label><br>
      </div>
      <div style="text-align:right;">
        <button id="enviar-comentario" style="padding: 8px 16px; background-color:#000080; color:white; border:none; border-radius:5px; cursor:pointer;">Enviar</button>
      </div>
    </div>
  </section>
  
  
      
      <!-- Javascript -->
    <script>
        document.getElementById('menu-toggle').addEventListener('click', function () {
    const menu = document.getElementById('dropdown-menu');
    const icon = this;

    if (menu.style.display === 'flex') {
        menu.style.display = 'none';
        icon.classList.remove('fa-xmark');
        icon.classList.add('fa-bars');
    } else {
        menu.style.display = 'flex';
        icon.classList.remove('fa-bars');
        icon.classList.add('fa-xmark');
    }
});

// Botão Comente
const openBtn = document.getElementById('open-comment');
const popup = document.getElementById('comment-popup');
const cancelarBtn = document.getElementById('cancelar');

openBtn.addEventListener('click', () => {
    popup.style.display = 'flex';
    resetForm();
});

cancelarBtn.addEventListener('click', () => {
    popup.style.display = 'none';
});

document.querySelector('.popup-close').addEventListener('click', () => {
    document.querySelector('.popup-overlay').style.display = 'none';
});

// Formulário de Comentários
const milhaoInput = document.getElementById("milhao");
const popupComentario = document.getElementById("comment-popup");
const popupErro = document.getElementById("milhao-erro-popup");
const btnErroOk = document.getElementById("btnErroOk");
const formComentario = document.getElementById("form-comentario");
const btnComente = document.getElementById("btn-comente");

// Validação do campo Milhão ao sair do input
milhaoInput.addEventListener("blur", () => {
    const valor = milhaoInput.value.trim();

    // Verifica se são 4 dígitos e entre 1001 e 1492
    if (!/^\d{4}$/.test(valor) || Number(valor) < 1001 || Number(valor) > 1492) {
        popupErro.style.display = "flex";
    }
});

// Ao clicar em "Ok" no popup de erro
btnErroOk.addEventListener("click", () => {
    popupErro.style.display = "none";
    popupComentario.style.display = "none";
    resetForm();
});

// Função para limpar o formulário
function resetForm() {
    formComentario.reset();
    milhaoInput.value = "";
}

// Ao abrir o popup de comentário, limpar o formulário
btnComente.addEventListener("click", () => {
    popupComentario.style.display = "flex";
    resetForm();
});

function abrirPopupErro() {
    document.getElementById('milhao-erro-popup').style.display = 'block';
}

function fecharPopupErro() {
    document.getElementById('milhao-erro-popup').style.display = 'none';
    document.getElementById('comment-popup').style.display = 'none';
}

// Galeria de Comentários
let comentarios = [];

function gerarTarjeta(milhao, nomeGuerra, id) {
  return `
    <div class="tarjeta" id="tarjeta-${id}" style="display:flex;width:290px;height:45px;background-color:#000080;color:#fff;border-radius:5px;overflow:hidden">
      <div style="width:30%;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:2px">
        <div style="font-size:14px;font-weight:bold">ALUNO</div>
        <div class="milhao" style="font-size:14px">91-${milhao}</div>
      </div>
      <div style="width:70%;display:flex;align-items:center;padding-left:10px;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">
        ${nomeGuerra}
      </div>
    </div>`;
}

function adicionarComentario(milhao, nomeGuerra, texto) {
  const data = new Date();
  const id = comentarios.length;
  const primeirasPalavras = texto.split(" ").slice(0, 10).join(" ");

  comentarios.push({ milhao, nomeGuerra, texto, data });

  const tarjetaHTML = gerarTarjeta(milhao, nomeGuerra, id);
  const miniatura = document.createElement("div");
  miniatura.className = "comentario-miniatura";
  miniatura.innerHTML = `${tarjetaHTML}<p>${primeirasPalavras}...</p>`;
  miniatura.onclick = () => abrirComentarioExpandido(id);

  document.getElementById("comentarios-container").appendChild(miniatura);
}

function abrirComentarioExpandido(index) {
  const comentario = comentarios[index];
  document.getElementById("data-hora-comentario").textContent = `Comentário feito em ${comentario.data.toLocaleDateString()} às ${comentario.data.toLocaleTimeString()}`;
  document.getElementById("tarjeta-expandida").innerHTML = gerarTarjeta(comentario.milhao, comentario.nomeGuerra, `expandido-${index}`);
  document.getElementById("comentario-completo").textContent = comentario.texto;
  document.getElementById("contador-comentarios").textContent = `${index + 1} de ${comentarios.length}`;

  document.getElementById("popup-comentario-expandido").style.display = "block";

  document.getElementById("comentario-anterior").onclick = () => {
    if (index > 0) abrirComentarioExpandido(index - 1);
  };
  document.getElementById("comentario-proximo").onclick = () => {
    if (index < comentarios.length - 1) abrirComentarioExpandido(index + 1);
  };
}

document.getElementById("fechar-expandido").onclick = () => {
  document.getElementById("popup-comentario-expandido").style.display = "none";
};

document.getElementById("fechar-adicionar").onclick = () => {
  document.getElementById("popup-adicionar-comentario").style.display = "none";
};

// Corrigido para funcionar com o botão "open-comment"
document.getElementById("open-comment").onclick = () => {
  document.getElementById("popup-adicionar-comentario").style.display = "block";
};

document.getElementById("enviar-comentario").onclick = () => {
  const milhao = document.getElementById("milhao-input").value.trim();
  const nomeGuerra = document.getElementById("nome-guerra-input").value.trim();
  const texto = document.getElementById("comentario-texto-input").value.trim();

  const milhaoNum = parseInt(milhao, 10);
  if (!/^[0-9]{4}$/.test(milhao) || milhaoNum < 1001 || milhaoNum > 1492) {
    alert("Milhão inválido. Digite um número de 4 dígitos entre 1001 e 1492.");
    return;
  }
  if (!nomeGuerra || !texto) {
    alert("Preencha todos os campos.");
    return;
  }

  adicionarComentario(milhao, nomeGuerra, texto);
  document.getElementById("popup-adicionar-comentario").style.display = "none";

  document.getElementById("milhao-input").value = "";
  document.getElementById("nome-guerra-input").value = "";
  document.getElementById("comentario-texto-input").value = "";
};

    </script>
</body>
</html>